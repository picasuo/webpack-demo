{"version":3,"file":"index.cjs.js","sources":["index.js"],"sourcesContent":["import postcss from 'postcss';\n\nexport default postcss.plugin('postcss-short-color', opts => {\n\tconst prefix = 'prefix' in Object(opts) ? `-${opts.prefix}-` : '';\n\tconst skip = 'skip' in Object(opts) ? String(opts.skip) : '*';\n\n\tconst colorPropertyRegExp = new RegExp(`^${prefix}(color)$`);\n\n\treturn root => {\n\t\t// for each color declaration\n\t\troot.walkDecls(colorPropertyRegExp, decl => {\n\t\t\t// conditionally unprefix the color property\n\t\t\tdecl.prop = decl.prop.replace(colorPropertyRegExp, '$1');\n\n\t\t\t// space-separated values (color, background-color)\n\t\t\tconst [color, backgroundColor] = postcss.list.space(decl.value);\n\n\t\t\tif (backgroundColor) {\n\t\t\t\t// conditionally prepend the background-color declaration\n\t\t\t\tif (backgroundColor !== skip) {\n\t\t\t\t\tdecl.cloneBefore({ prop: 'background-color', value: backgroundColor });\n\t\t\t\t}\n\n\t\t\t\t// conditionally remove the color declaration\n\t\t\t\tif (color !== skip) {\n\t\t\t\t\tdecl.value = color;\n\t\t\t\t} else {\n\t\t\t\t\tdecl.remove();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n});\n"],"names":["postcss","plugin","opts","prefix","Object","skip","String","colorPropertyRegExp","RegExp","root","walkDecls","decl","prop","replace","list","space","value","color","backgroundColor","cloneBefore","remove"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,YAAeA,OAAO,CAACC,MAAR,CAAe,qBAAf,EAAsCC,IAAI,IAAI;QACtDC,MAAM,GAAG,YAAYC,MAAM,CAACF,IAAD,CAAlB,GAA4B,IAAGA,IAAI,CAACC,MAAO,GAA3C,GAAgD,EAA/D;QACME,IAAI,GAAG,UAAUD,MAAM,CAACF,IAAD,CAAhB,GAAyBI,MAAM,CAACJ,IAAI,CAACG,IAAN,CAA/B,GAA6C,GAA1D;QAEME,mBAAmB,GAAG,IAAIC,MAAJ,CAAY,IAAGL,MAAO,UAAtB,CAA5B;SAEOM,IAAI,IAAI;;IAEdA,IAAI,CAACC,SAAL,CAAeH,mBAAf,EAAoCI,IAAI,IAAI;;MAE3CA,IAAI,CAACC,IAAL,GAAYD,IAAI,CAACC,IAAL,CAAUC,OAAV,CAAkBN,mBAAlB,EAAuC,IAAvC,CAAZ,CAF2C;;kCAKVP,OAAO,CAACc,IAAR,CAAaC,KAAb,CAAmBJ,IAAI,CAACK,KAAxB,CALU;;YAKpCC,KALoC;YAK7BC,eAL6B;;UAOvCA,eAAJ,EAAqB;;YAEhBA,eAAe,KAAKb,IAAxB,EAA8B;UAC7BM,IAAI,CAACQ,WAAL,CAAiB;YAAEP,IAAI,EAAE,kBAAR;YAA4BI,KAAK,EAAEE;WAApD;SAHmB;;;YAOhBD,KAAK,KAAKZ,IAAd,EAAoB;UACnBM,IAAI,CAACK,KAAL,GAAaC,KAAb;SADD,MAEO;UACNN,IAAI,CAACS,MAAL;;;KAjBH;GAFD;CANc,CAAf;;;;"}