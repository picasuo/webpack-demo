{"version":3,"file":"index.cjs.js","sources":["index.js"],"sourcesContent":["import postcss from 'postcss';\n\nexport default postcss.plugin('postcss-short-position', opts => {\n\tconst prefix = 'prefix' in Object(opts) ? `-${opts.prefix}-` : '';\n\tconst skip = 'skip' in Object(opts) ? String(opts.skip) : '*';\n\n\t// property pattern\n\tconst propertyMatch = new RegExp(`^${prefix}(position)$`);\n\n\treturn root => {\n\t\t// walk each matching declaration\n\t\troot.walkDecls(propertyMatch, decl => {\n\t\t\t// unprefixed property\n\t\t\tconst [, property] = decl.prop.match(propertyMatch);\n\n\t\t\t// if a prefix is in use\n\t\t\tif (prefix) {\n\t\t\t\t// remove it from the property\n\t\t\t\tdecl.prop = property;\n\t\t\t}\n\n\t\t\t// position value\n\t\t\tlet position;\n\n\t\t\t// space-separated values (top, right, bottom, left) sans the position value\n\t\t\tconst values = postcss.list.space(decl.value).filter(value => {\n\t\t\t\t// whether the value is a position\n\t\t\t\tconst isPosition = !position && positionMatch.test(value);\n\n\t\t\t\t// if the value is a position\n\t\t\t\tif (isPosition) {\n\t\t\t\t\t// update the position value\n\t\t\t\t\tposition = value;\n\t\t\t\t}\n\n\t\t\t\t// return whether the value was not a position (a side)\n\t\t\t\treturn !isPosition;\n\t\t\t});\n\n\t\t\t// conditionally add a top value\n\t\t\tif (values.length === 0) {\n\t\t\t\tvalues.push(skip);\n\t\t\t}\n\n\t\t\t// conditionally add a right value\n\t\t\tif (values.length === 1) {\n\t\t\t\tvalues.push(values[0]);\n\t\t\t}\n\n\t\t\t// conditionally add a bottom value\n\t\t\tif (values.length === 2) {\n\t\t\t\tvalues.push(values[0]);\n\t\t\t}\n\n\t\t\t// conditionally add a left value\n\t\t\tif (values.length === 3) {\n\t\t\t\tvalues.push(values[1]);\n\t\t\t}\n\n\t\t\t// for each side property\n\t\t\tproperties.forEach((side, index) => {\n\t\t\t\t// if the value is not a skip token\n\t\t\t\tif (values[index] !== skip) {\n\t\t\t\t\t// create a new declaration for the side property\n\t\t\t\t\tdecl.cloneBefore({\n\t\t\t\t\t\tprop:  side,\n\t\t\t\t\t\tvalue: values[index]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// if there is a position value\n\t\t\tif (position) {\n\t\t\t\t// update the position value\n\t\t\t\tdecl.value = position;\n\t\t\t} else {\n\t\t\t\t// otherwise, remove the original position declaration\n\t\t\t\tdecl.remove();\n\t\t\t}\n\t\t});\n\t};\n});\n\n// side properties\nconst properties = ['top', 'right', 'bottom', 'left'];\n\n// position value pattern\nconst positionMatch = /^(inherit|initial|unset|absolute|fixed|relative|static|sticky|var\\(.+\\))$/;\n"],"names":["postcss","plugin","opts","prefix","Object","skip","String","propertyMatch","RegExp","root","walkDecls","decl","prop","match","property","position","values","list","space","value","filter","isPosition","positionMatch","test","length","push","properties","forEach","side","index","cloneBefore","remove"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,YAAeA,OAAO,CAACC,MAAR,CAAe,wBAAf,EAAyCC,IAAI,IAAI;QACzDC,MAAM,GAAG,YAAYC,MAAM,CAACF,IAAD,CAAlB,GAA4B,IAAGA,IAAI,CAACC,MAAO,GAA3C,GAAgD,EAA/D;QACME,IAAI,GAAG,UAAUD,MAAM,CAACF,IAAD,CAAhB,GAAyBI,MAAM,CAACJ,IAAI,CAACG,IAAN,CAA/B,GAA6C,GAA1D,CAF+D;;QAKzDE,aAAa,GAAG,IAAIC,MAAJ,CAAY,IAAGL,MAAO,aAAtB,CAAtB;SAEOM,IAAI,IAAI;;IAEdA,IAAI,CAACC,SAAL,CAAeH,aAAf,EAA8BI,IAAI,IAAI;;+BAEhBA,IAAI,CAACC,IAAL,CAAUC,KAAV,CAAgBN,aAAhB,CAFgB;;YAE5BO,QAF4B;;;UAKjCX,MAAJ,EAAY;;QAEXQ,IAAI,CAACC,IAAL,GAAYE,QAAZ;OAPoC;;;UAWjCC,QAAJ,CAXqC;;YAc/BC,MAAM,GAAGhB,OAAO,CAACiB,IAAR,CAAaC,KAAb,CAAmBP,IAAI,CAACQ,KAAxB,EAA+BC,MAA/B,CAAsCD,KAAK,IAAI;;cAEvDE,UAAU,GAAG,CAACN,QAAD,IAAaO,aAAa,CAACC,IAAd,CAAmBJ,KAAnB,CAAhC,CAF6D;;YAKzDE,UAAJ,EAAgB;;UAEfN,QAAQ,GAAGI,KAAX;SAP4D;;;eAWtD,CAACE,UAAR;OAXc,CAAf,CAdqC;;UA6BjCL,MAAM,CAACQ,MAAP,KAAkB,CAAtB,EAAyB;QACxBR,MAAM,CAACS,IAAP,CAAYpB,IAAZ;OA9BoC;;;UAkCjCW,MAAM,CAACQ,MAAP,KAAkB,CAAtB,EAAyB;QACxBR,MAAM,CAACS,IAAP,CAAYT,MAAM,CAAC,CAAD,CAAlB;OAnCoC;;;UAuCjCA,MAAM,CAACQ,MAAP,KAAkB,CAAtB,EAAyB;QACxBR,MAAM,CAACS,IAAP,CAAYT,MAAM,CAAC,CAAD,CAAlB;OAxCoC;;;UA4CjCA,MAAM,CAACQ,MAAP,KAAkB,CAAtB,EAAyB;QACxBR,MAAM,CAACS,IAAP,CAAYT,MAAM,CAAC,CAAD,CAAlB;OA7CoC;;;MAiDrCU,UAAU,CAACC,OAAX,CAAmB,CAACC,IAAD,EAAOC,KAAP,KAAiB;;YAE/Bb,MAAM,CAACa,KAAD,CAAN,KAAkBxB,IAAtB,EAA4B;;UAE3BM,IAAI,CAACmB,WAAL,CAAiB;YAChBlB,IAAI,EAAGgB,IADS;YAEhBT,KAAK,EAAEH,MAAM,CAACa,KAAD;WAFd;;OAJF,EAjDqC;;UA6DjCd,QAAJ,EAAc;;QAEbJ,IAAI,CAACQ,KAAL,GAAaJ,QAAb;OAFD,MAGO;;QAENJ,IAAI,CAACoB,MAAL;;KAlEF;GAFD;CAPc,CAAf;;AAkFA,MAAML,UAAU,GAAG,CAAC,KAAD,EAAQ,OAAR,EAAiB,QAAjB,EAA2B,MAA3B,CAAnB;;AAGA,MAAMJ,aAAa,GAAG,2EAAtB;;;;"}