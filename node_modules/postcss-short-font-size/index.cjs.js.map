{"version":3,"file":"index.cjs.js","sources":["index.js"],"sourcesContent":["import postcss from 'postcss';\n\n// !important keyword pattern\nconst importantMatch = /\\s*!important$/;\n\nexport default postcss.plugin('postcss-short-font-size', opts => {\n\tconst prefix = 'prefix' in Object(opts) ? `-${opts.prefix}-` : '';\n\tconst skip = 'skip' in Object(opts) ? String(opts.skip) : '*';\n\n\tconst fontSizePropertyRegExp = new RegExp(`^${prefix}(font-size)$`);\n\n\treturn root => {\n\t\t// for each font-size declaration\n\t\troot.walkDecls(fontSizePropertyRegExp, decl => {\n\t\t\t// conditionally unprefix the font-size property\n\t\t\tdecl.prop = decl.prop.replace(fontSizePropertyRegExp, '$1');\n\n\t\t\t// slash-separated values (font-size, line-height)\n\t\t\tconst [fontSize, lineHeight] = postcss.list.split(decl.value, '/');\n\n\t\t\t// whether the font-size is !important\n\t\t\tdecl.important = importantMatch.test(fontSize);\n\n\t\t\tif (lineHeight) {\n\t\t\t\t// conditionally prepend the line-height declaration\n\t\t\t\tif (lineHeight !== skip) {\n\t\t\t\t\tdecl.cloneBefore({ prop: 'line-height', value: lineHeight });\n\t\t\t\t}\n\n\t\t\t\t// conditionally remove the color declaration\n\t\t\t\tif (fontSize !== skip) {\n\t\t\t\t\tdecl.value = fontSize.replace(importantMatch, '');\n\t\t\t\t} else {\n\t\t\t\t\tdecl.remove();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n});\n"],"names":["importantMatch","postcss","plugin","opts","prefix","Object","skip","String","fontSizePropertyRegExp","RegExp","root","walkDecls","decl","prop","replace","list","split","value","fontSize","lineHeight","important","test","cloneBefore","remove"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,MAAMA,cAAc,GAAG,gBAAvB;AAEA,YAAeC,OAAO,CAACC,MAAR,CAAe,yBAAf,EAA0CC,IAAI,IAAI;QAC1DC,MAAM,GAAG,YAAYC,MAAM,CAACF,IAAD,CAAlB,GAA4B,IAAGA,IAAI,CAACC,MAAO,GAA3C,GAAgD,EAA/D;QACME,IAAI,GAAG,UAAUD,MAAM,CAACF,IAAD,CAAhB,GAAyBI,MAAM,CAACJ,IAAI,CAACG,IAAN,CAA/B,GAA6C,GAA1D;QAEME,sBAAsB,GAAG,IAAIC,MAAJ,CAAY,IAAGL,MAAO,cAAtB,CAA/B;SAEOM,IAAI,IAAI;;IAEdA,IAAI,CAACC,SAAL,CAAeH,sBAAf,EAAuCI,IAAI,IAAI;;MAE9CA,IAAI,CAACC,IAAL,GAAYD,IAAI,CAACC,IAAL,CAAUC,OAAV,CAAkBN,sBAAlB,EAA0C,IAA1C,CAAZ,CAF8C;;kCAKfP,OAAO,CAACc,IAAR,CAAaC,KAAb,CAAmBJ,IAAI,CAACK,KAAxB,EAA+B,GAA/B,CALe;;YAKvCC,QALuC;YAK7BC,UAL6B;;;MAQ9CP,IAAI,CAACQ,SAAL,GAAiBpB,cAAc,CAACqB,IAAf,CAAoBH,QAApB,CAAjB;;UAEIC,UAAJ,EAAgB;;YAEXA,UAAU,KAAKb,IAAnB,EAAyB;UACxBM,IAAI,CAACU,WAAL,CAAiB;YAAET,IAAI,EAAE,aAAR;YAAuBI,KAAK,EAAEE;WAA/C;SAHc;;;YAOXD,QAAQ,KAAKZ,IAAjB,EAAuB;UACtBM,IAAI,CAACK,KAAL,GAAaC,QAAQ,CAACJ,OAAT,CAAiBd,cAAjB,EAAiC,EAAjC,CAAb;SADD,MAEO;UACNY,IAAI,CAACW,MAAL;;;KApBH;GAFD;CANc,CAAf;;;;"}