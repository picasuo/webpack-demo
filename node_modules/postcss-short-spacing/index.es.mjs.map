{"version":3,"file":"index.es.mjs","sources":["index.js"],"sourcesContent":["import postcss from 'postcss';\n\nexport default postcss.plugin('postcss-short-spacing', opts => {\n\t// get the prefix\n\tconst prefix = 'prefix' in Object(opts) ? `-${opts.prefix}-` : '';\n\n\t// get the skip token\n\tconst skip = 'skip' in Object(opts) ? String(opts.skip) : '*';\n\n\t// property pattern\n\tconst spacingPropertyRegExp = new RegExp(`^${prefix}(margin|padding)(-(?:block|end|inline|start))?$`, 'i');\n\n\treturn root => {\n\t\t// walk each matching declaration\n\t\troot.walkDecls(spacingPropertyRegExp, decl => {\n\t\t\tconst [, property, logical] = decl.prop.match(spacingPropertyRegExp);\n\n\t\t\t// update the property\n\t\t\tif (prefix) {\n\t\t\t\tdecl.prop = `${property}${logical || ''}`\n\t\t\t}\n\n\t\t\t// get the space-separated values\n\t\t\tconst values = postcss.list.space(decl.value);\n\n\t\t\tif (values.includes(skip)) {\n\t\t\t\tconst isBlockInline = blockInlineRegExp.test(logical);\n\t\t\t\tconst isStartEnd = startEndRegExp.test(logical);\n\t\t\t\tconst isFourSide = !logical;\n\n\t\t\t\tif (isBlockInline) {\n\t\t\t\t\ttransformBlockInline(decl, `${property}${logical}-&`, values, skip);\n\t\t\t\t} else if (isStartEnd) {\n\t\t\t\t\ttransformStartEnd(decl, `${property}-&${logical}`, values, skip);\n\t\t\t\t} else if (isFourSide) {\n\t\t\t\t\ttransformFourSide(decl, `${property}-&`, values, skip);\n\t\t\t\t}\n\n\t\t\t\tdecl.remove();\n\t\t\t}\n\t\t});\n\t};\n});\n\nconst blockInlineRegExp = /^-(block|inline)$/i;\nconst startEndRegExp = /^-(start|end)$/i;\n\n// conditionally add start/end values\nconst transformBlockInline = (decl, property, values, skip) => { // eslint-disable-line max-params\n\tconst [$1, $2] = values;\n\n\tif ($1 && $1 !== skip) {\n\t\tdecl.cloneBefore({\n\t\t\tprop: property.replace('&', 'start'),\n\t\t\tvalue: $1\n\t\t});\n\t}\n\n\tif ($2 && $2 !== skip) {\n\t\tdecl.cloneBefore({\n\t\t\tprop: property.replace('&', 'end'),\n\t\t\tvalue: $2\n\t\t});\n\t}\n};\n\n// conditionally add block/inline values\nconst transformStartEnd = (decl, property, values, skip) => { // eslint-disable-line max-params\n\tconst [$1, $2] = values;\n\n\tif ($1 && $1 !== skip) {\n\t\tdecl.cloneBefore({\n\t\t\tprop: property.replace('&', 'block'),\n\t\t\tvalue: $1\n\t\t});\n\t}\n\n\tif ($2 && $2 !== skip) {\n\t\tdecl.cloneBefore({\n\t\t\tprop: property.replace('&', 'inline'),\n\t\t\tvalue: $2\n\t\t});\n\t}\n};\n\n// conditionally add top/right/bottom/left values\nconst transformFourSide = (decl, property, values, skip) => { // eslint-disable-line max-params\n\tconst [$1, $2, $3, $4] = values;\n\n\t// conditionally add a left value\n\tif ($4 && $4 !== skip) {\n\t\tdecl.cloneBefore({\n\t\t\tprop: property.replace('&', 'left'),\n\t\t\tvalue: $4\n\t\t});\n\t}\n\n\t// conditionally add a bottom value\n\tif ($3 && $3 !== skip) {\n\t\tdecl.cloneBefore({\n\t\t\tprop: property.replace('&', 'bottom'),\n\t\t\tvalue: $3\n\t\t});\n\t}\n\n\t// conditionally add a right value\n\tif ($2 && $2 !== skip) {\n\t\tif (!$4) {\n\t\t\tdecl.cloneBefore({\n\t\t\t\tprop: property.replace('&', 'left'),\n\t\t\t\tvalue: $2\n\t\t\t});\n\t\t}\n\n\t\tdecl.cloneBefore({\n\t\t\tprop: property.replace('&', 'right'),\n\t\t\tvalue: $2\n\t\t});\n\t}\n\n\t// conditionally add a top value\n\tif ($1 && $1 !== skip) {\n\t\tif (!$3) {\n\t\t\tdecl.cloneBefore({\n\t\t\t\tprop: property.replace('&', 'bottom'),\n\t\t\t\tvalue: $1\n\t\t\t});\n\t\t}\n\n\t\tdecl.cloneBefore({\n\t\t\tprop: property.replace('&', 'top'),\n\t\t\tvalue: $1\n\t\t});\n\t}\n};\n"],"names":["postcss","plugin","opts","prefix","Object","skip","String","spacingPropertyRegExp","RegExp","root","walkDecls","decl","prop","match","property","logical","values","list","space","value","includes","isBlockInline","blockInlineRegExp","test","isStartEnd","startEndRegExp","isFourSide","transformBlockInline","transformStartEnd","transformFourSide","remove","$1","$2","cloneBefore","replace","$3","$4"],"mappings":"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"}